"use strict";window.backend={upload:function(e,o,n){var t=new XMLHttpRequest;t.responseType="json",t.addEventListener("load",function(){200===t.status?o(t.status):n(t)}),t.open("POST","https://echo.htmlacademy.ru"),t.send(e)}},function(){var e=document.querySelector("body"),o=e.querySelector(".js-form");if(o){var n=o.querySelectorAll("input"),t=27;o.addEventListener("submit",function(e){e.preventDefault(),window.backend.upload(new FormData(o),l,a)})}function a(){s(),d(!1),c()}function l(){s(),d(!0),c()}function s(){window.overlay.showOverlay(),scrollLock.disablePageScroll(e)}function i(){window.overlay.hideOverlay(),scrollLock.enablePageScroll(e)}function r(){window.modalMessage.removeMessage()}function c(){for(var e=0;e<n.length;e++)n[e].parentNode.classList.remove("form__label--valid"),n[e].value="",n[e].blur()}function d(e){window.modalMessage.renderMessage(e),document.addEventListener("keydown",u),document.addEventListener("click",v),window.modalMessage.onButtonClick(m)}function u(e){e.keyCode===t&&m()}function v(e){e.target.classList.contains("overlay")&&m()}function m(){setTimeout(i,400),setTimeout(r,400),document.removeEventListener("keydown",u),document.removeEventListener("click",v)}}(),function(){var e=document.querySelectorAll(".js-form");e&&e.forEach(function(e){for(var o=e.querySelectorAll("input"),n=0;n<o.length;n++)o[n].addEventListener("input",t);function t(n){setTimeout(function(){var e=n.target,o=e.parentElement;!0===e.validity.valid&&(o.classList.contains("form__label--valid")||o.classList.add("form__label--valid")),!1===e.validity.valid&&0<e.value.length&&o.classList.contains("form__label--valid")&&o.classList.remove("form__label--valid"),0===e.value.length&&o.classList.contains("form__label--valid")&&o.classList.remove("form__label--valid")},100)}})}(),$(".js-phone-mask").length&&$(".js-phone-mask").inputmask({mask:"+7 (999) 999-99-99",placeholder:"+7 (___) ___-__-__",showMaskOnHover:!1}),function(){var o=document.querySelector("body"),e=o.querySelectorAll(".order-button-js"),n=o.querySelector(".modal-form-js"),t=27;if(e||e||n){var a=n.querySelector(".js-form"),l=a.querySelectorAll("input"),s=n.querySelector(".modal-button-js");e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),window.overlay.showOverlay(),scrollLock.disablePageScroll(o),function(){n.classList.remove("modal-form--hide"),n.classList.contains("modal-form--show")||n.classList.add("modal-form--show");s.addEventListener("click",y),document.addEventListener("keydown",m),document.addEventListener("click",f)}()})}),a.addEventListener("submit",function(e){e.preventDefault(),window.backend.upload(new FormData(a),c,r)})}function i(){n.classList.remove("modal-form--show"),n.classList.contains("modal-form--hide")||n.classList.add("modal-form--hide")}function r(){i(),d(),u(!1)}function c(){i(),d(),u(!0)}function d(){for(var e=0;e<l.length;e++)l[e].parentNode.classList.remove("form__label--valid"),l[e].value="",l[e].blur()}function u(e){window.modalMessage.renderMessage(e),document.addEventListener("keydown",m),document.addEventListener("click",f),window.modalMessage.onButtonClick(y)}function v(){window.overlay.hideOverlay(),scrollLock.enablePageScroll(o)}function m(e){e.keyCode===t&&y()}function f(e){e.target.classList.contains("overlay")&&y()}function y(){setTimeout(v,200),setTimeout(i,200),window.modalMessage.removeMessage(),s.removeEventListener("click",y),document.removeEventListener("keydown",m),document.removeEventListener("click",f)}}(),function(){var n,t=document.querySelector("body");window.modalMessage={renderMessage:function(e){var o;(n=document.createElement("div")).classList.add("modal-message"),o=e?"Отлично!<br> Медведи уже ждут тебя...":"Ошибка.<br> Попробуй ещё раз.",n.innerHTML='<div class="modal-message__content"><h2 class="modal-message__title">'+o+'</h2><button type="button" class="modal-message__button" title="Закрыть"></button></div>',t.appendChild(n)},removeMessage:function(){n&&(n.classList.add("modal-message--hide"),setTimeout(function(){t.removeChild(n),n=null},800))},onButtonClick:function(e){n.querySelector(".modal-message__button").addEventListener("click",e)}}}(),function(){var e=document.querySelector(".overlay");e&&(window.overlay={showOverlay:function(){e.classList.remove("overlay--hide"),e.classList.contains("overlay--show")||e.classList.add("overlay--show")},hideOverlay:function(){e.classList.remove("overlay--show"),e.classList.contains("overlay--hide")||e.classList.add("overlay--hide")}})}(),function(){var e=document.querySelectorAll(".bg-parallax");null!==e&&Array.prototype.slice.call(e).forEach(function(e){var l=e.querySelector(".bg-parallax__element");e.addEventListener("mousemove",function(e){var o=window.innerWidth/2,n=window.innerHeight/2,t=e.clientX,a=e.clientY;l.style.backgroundPositionX="calc(-3.5vw + "+.05*(t-o)+"px)",l.style.backgroundPositionY="calc(-3.5vh + "+.05*(a-n)+"px)"})})}(),function(){var e=document.querySelector(".video__content-wrapper");if(e){var o=e.querySelector(".video__button"),n=e.querySelector(".video__video");e.classList.add("video__content-wrapper--js"),n.controls=!1,o.addEventListener("click",function(){n.style.background="none",n.style.backgroundColor="black",n.controls=!0,n.play(),o.classList.add("video__button--animation"),setTimeout(t,1500)})}function t(){o.style.display="none"}}(),new Swiper(".slider-js",{autoHeight:!0,slidesPerView:1,spaceBetween:50,updateOnWindowResize:!0,loop:!0,pagination:{el:".swiper-pagination",type:"fraction",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});