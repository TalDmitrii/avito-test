"use strict";window.backend={upload:function(e,o,t){var n=new XMLHttpRequest;n.responseType="json",n.addEventListener("load",function(){200===n.status?o(n.status):t(n)}),n.open("POST","https://echo.htmlacademy.ru"),n.send(e)}},function(){var e=document.querySelector("body"),o=e.querySelector(".js-form");if(o){var t=o.querySelectorAll("input"),n=27;o.addEventListener("submit",function(e){e.preventDefault(),window.backend.upload(new FormData(o),l,a)})}function a(){s(),d(!1),c()}function l(){s(),d(!0),c()}function s(){window.overlay.showOverlay(),scrollLock.disablePageScroll(e)}function i(){window.overlay.hideOverlay(),scrollLock.enablePageScroll(e)}function r(){window.modalMessage.removeMessage()}function c(){for(var e=0;e<t.length;e++)t[e].parentNode.classList.remove("form__label--valid"),t[e].value="",t[e].blur()}function d(e){window.modalMessage.renderMessage(e),document.addEventListener("keydown",u),document.addEventListener("click",v),window.modalMessage.onButtonClick(m)}function u(e){e.keyCode===n&&m()}function v(e){e.target.classList.contains("overlay")&&m()}function m(){setTimeout(i,400),setTimeout(r,400),document.removeEventListener("keydown",u),document.removeEventListener("click",v)}}(),function(){var e=document.querySelector(".js-form");if(e)for(var o=e.querySelectorAll("input"),t=0;t<o.length;t++)o[t].addEventListener("input",n);function n(t){setTimeout(function(){var e=t.target,o=e.parentElement;!0===e.validity.valid&&(o.classList.contains("form__label--valid")||o.classList.add("form__label--valid")),!1===e.validity.valid&&0<e.value.length&&o.classList.contains("form__label--valid")&&o.classList.remove("form__label--valid"),0===e.value.length&&o.classList.contains("form__label--valid")&&o.classList.remove("form__label--valid")},100)}}(),$(".js-phone-mask").length&&$(".js-phone-mask").inputmask({mask:"+7 (999) 999-99-99",placeholder:"+7 (___) ___-__-__",showMaskOnHover:!1}),function(){var o=document.querySelector("body"),e=o.querySelectorAll(".order-button-js"),t=o.querySelector(".modal-form-js"),n=27;if(e||e||t){var a=t.querySelector(".modal-button-js");e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),window.overlay.showOverlay(),scrollLock.disablePageScroll(o),function(){t.classList.remove("modal-form--hide"),t.classList.contains("modal-form--show")||t.classList.add("modal-form--show");a.addEventListener("click",i),document.addEventListener("keydown",l),document.addEventListener("click",s)}()})})}function l(e){e.keyCode===n&&i()}function s(e){e.target.classList.contains("overlay")&&i()}function i(){t.classList.remove("modal-form--show"),t.classList.contains("modal-form--hide")||t.classList.add("modal-form--hide"),window.overlay.hideOverlay(),scrollLock.enablePageScroll(o),a.removeEventListener("click",i),document.removeEventListener("keydown",l),document.removeEventListener("click",s)}}(),function(){var t,n=document.querySelector("body");window.modalMessage={renderMessage:function(e){var o;(t=document.createElement("div")).classList.add("modal-message"),o=e?"Отлично!<br> Медведи уже ждут тебя...":"Ошибка.<br> Попробуй ещё раз.",t.innerHTML='<div class="modal-message__content"><h2 class="modal-message__title">'+o+'</h2><button type="button" class="modal-message__button" title="Закрыть"></button></div>',n.appendChild(t)},removeMessage:function(){t&&(t.classList.add("modal-message--hide"),setTimeout(function(){n.removeChild(t),t=null},800))},onButtonClick:function(e){t.querySelector(".modal-message__button").addEventListener("click",e)}}}(),function(){var e=document.querySelector(".overlay");e&&(window.overlay={showOverlay:function(){e.classList.remove("overlay--hide"),e.classList.contains("overlay--show")||e.classList.add("overlay--show")},hideOverlay:function(){e.classList.remove("overlay--show"),e.classList.contains("overlay--hide")||e.classList.add("overlay--hide")}})}(),function(){var e=document.querySelectorAll(".bg-parallax");null!==e&&Array.prototype.slice.call(e).forEach(function(e){var l=e.querySelector(".bg-parallax__element");e.addEventListener("mousemove",function(e){var o=window.innerWidth/2,t=window.innerHeight/2,n=e.clientX,a=e.clientY;l.style.backgroundPositionX="calc(-3.5vw + "+.05*(n-o)+"px)",l.style.backgroundPositionY="calc(-3.5vh + "+.05*(a-t)+"px)"})})}(),function(){var e=document.querySelector(".video__content-wrapper");if(e){var o=e.querySelector(".video__button"),t=e.querySelector(".video__video");e.classList.add("video__content-wrapper--js"),t.controls=!1,o.addEventListener("click",function(){t.style.background="none",t.style.backgroundColor="black",t.controls=!0,t.play(),o.classList.add("video__button--animation"),setTimeout(n,1500)})}function n(){o.style.display="none"}}(),new Swiper(".slider-js",{autoHeight:!0,slidesPerView:1,spaceBetween:50,updateOnWindowResize:!0,loop:!0,pagination:{el:".swiper-pagination",type:"fraction",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});